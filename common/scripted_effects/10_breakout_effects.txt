breeder_ratio_modifier_check_2 = {
	if = {
		limit = {
			pop_type_percent_country = {
				pop_type = breeder
				percent < 0.2
			}
		}
		if ={
			limit = {
				pop_type_percent_country = {
					pop_type = breeder
					percent < 0.1
				}
			}
			if ={
				limit = {
					pop_type_percent_country = {
						pop_type = breeder
						percent < 0.05
					}
				}
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_00
						months = 1
					}
				}
			}
			else = {
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_05
						months = 1
					}
				}
			}
		}	
		else ={
			if ={
				limit = {
					pop_type_percent_country = {
						pop_type = breeder
						percent < 0.15
					}
				}
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_10
						months = 1
					}
				}
			}
			else = {
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_15
						months = 1
					}
				}
			}
		}	
	}
	else_if = {
		limit = {
			pop_type_percent_country = {
				pop_type = breeder
				percent < 0.4
			}
		}
		if ={
			limit = {
				pop_type_percent_country = {
					pop_type = breeder
					percent < 0.3
				}
			}
			if ={
				limit = {
					pop_type_percent_country = {
						pop_type = breeder
						percent < 0.25
					}
				}
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_20
						months = 1
					}
				}
			}
			else = {
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_25
						months = 1
					}
				}
			}
		}	
		else ={
			if ={
				limit = {
					pop_type_percent_country = {
						pop_type = breeder
						percent < 0.35
					}
				}
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_30
						months = 1
					}
				}
			}
			else = {
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_35
						months = 1
					}
				}
			}
		}	
	}
	else_if = {
		limit = {
			pop_type_percent_country = {
				pop_type = breeder
				percent < 0.6
			}
		}
		if ={
			limit = {
				pop_type_percent_country = {
					pop_type = breeder
					percent < 0.5
				}
			}
			if ={
				limit = {
					pop_type_percent_country = {
						pop_type = breeder
						percent < 0.45
					}
				}
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_40
						months = 1
					}
				}
			}
			else = {
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_45
						months = 1
					}
				}
			}
		}	
		else ={
			if ={
				limit = {
					pop_type_percent_country = {
						pop_type = breeder
						percent < 0.55
					}
				}
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_50
						months = 1
					}
				}
			}
			else = {
				every_scope_state = {
					add_modifier = {
						name = breeder_ratio_modifier_55
						months = 1
					}
				}
			}
		}
	}
	else = {
		if ={
			limit = {
				pop_type_percent_country = {
					pop_type = breeder
					percent < 0.65
				}
			}
			every_scope_state = {
				add_modifier = {
					name = breeder_ratio_modifier_60
					months = 1
				}
			}
		}	
		else_if ={
			limit = {
				pop_type_percent_country = {
					pop_type = breeder
					percent < 0.70
				}
			}
			every_scope_state = {
				add_modifier = {
					name = breeder_ratio_modifier_65
					months = 1
				}
			}
		}	
		else_if ={
			limit = {
				pop_type_percent_country = {
					pop_type = breeder
					percent < 0.75
				}
			}
			every_scope_state = {
				add_modifier = {
					name = breeder_ratio_modifier_70
					months = 1
				}
			}
		}	
		else ={
			every_scope_state = {
				add_modifier = {
					name = breeder_ratio_modifier_75
					months = 1
				}
			}
		}
	}
	
}

breeder_ratio_modifier_check = {
	every_scope_state = {
		save_scope_as = checked_state		
		#计算抚养者人口
		set_variable = {
			name = breeder_ratio
			value = 0
		}
		every_scope_building = {
			limit = {
				OR = { #自给农业
					is_building_type = building_subsistence_farms
					is_building_type = building_subsistence_orchards
					is_building_type = building_subsistence_pastures
				}
			}
			if = {
				limit = { has_active_production_method = pm_serfdom } #农奴制
				scope:checked_state = {
					change_variable = {
						name = breeder_ratio
						add = {
							value = 8000 #农奴制一级提供8000抚养者岗位
							multiply = prev.occupancy
							multiply = prev.level
						}
					}
				}
			}
			else = {
				scope:checked_state = {
					change_variable = {
						name = breeder_ratio
						add = {
							value = 5000 #自耕农一级提供5000抚养者岗位
							multiply = prev.occupancy
							multiply = prev.level
						}
					}
				}
			}
		}
		every_scope_building = {
			limit = {
				OR = { #居民区
					is_building_type = breed_center
				}
			}
			if = {
				limit = { has_active_production_method = pm_tradition_breeder } #多子多福
				scope:checked_state = {
					change_variable = {
						name = breeder_ratio
						add = {
							value = 5000 #多子多福一级提供8000抚养者岗位
							multiply = prev.occupancy
							multiply = prev.level
						}
					}
				}
			}
			else = {
				scope:checked_state = {
					change_variable = {
						name = breeder_ratio
						add = {
							value = 3000 #优生优育一级提供3000抚养者岗位
							multiply = prev.occupancy
							multiply = prev.level
						}
					}
				}
			}
		}
		#上面的是岗位数量，要乘上系数，得到抚养者pop总人口
		change_variable = {
			name = breeder_ratio
			divide = 0.6 #默认劳动力人口比例
		}
		
		#除以总人口
		change_variable = {
			name = breeder_ratio
			divide = {
				value = state_population
				min = 1
			}
		}

		#按照比例决定生育率
		if = {
			limit = {
				var:breeder_ratio < 0.2
			}
			if ={
				limit = {
					var:breeder_ratio < 0.1
				}
				if ={
					limit = {
						var:breeder_ratio < 0.05
					}
					add_modifier = {
						name = breeder_ratio_modifier_00
						months = 6
					}
				}
				else = {
					add_modifier = {
						name = breeder_ratio_modifier_05
						months = 6
					}
				}
			}	
			else ={
				if ={
					limit = {
						var:breeder_ratio < 0.15
					}
					add_modifier = {
						name = breeder_ratio_modifier_10
						months = 6
					}
				}
				else = {
					add_modifier = {
						name = breeder_ratio_modifier_15
						months = 6
					}
				}
			}	
		}
		else_if = {
			limit = {
				var:breeder_ratio < 0.4
			}
			if ={
				limit = {
					var:breeder_ratio < 0.3
				}
				if ={
					limit = {
						var:breeder_ratio < 0.25
					}
					add_modifier = {
						name = breeder_ratio_modifier_20
						months = 6
					}
				}
				else = {
					add_modifier = {
						name = breeder_ratio_modifier_25
						months = 6
					}
				}
			}	
			else ={
				if ={
					limit = {
						var:breeder_ratio < 0.35
					}
					add_modifier = {
						name = breeder_ratio_modifier_30
						months = 6
					}
				}
				else = {
					add_modifier = {
						name = breeder_ratio_modifier_35
						months = 6
					}
				}
			}	
		}
		else_if = {
			limit = {
				var:breeder_ratio < 0.6
			}
			if ={
				limit = {
					var:breeder_ratio < 0.5
				}
				if ={
					limit = {
						var:breeder_ratio < 0.45
					}
					add_modifier = {
						name = breeder_ratio_modifier_40
						months = 6
					}
				}
				else = {
					add_modifier = {
						name = breeder_ratio_modifier_45
						months = 6
					}
				}
			}	
			else ={
				if ={
					limit = {
						var:breeder_ratio < 0.55
					}
					add_modifier = {
						name = breeder_ratio_modifier_50
						months = 6
					}
				}
				else = {
					add_modifier = {
						name = breeder_ratio_modifier_55
						months = 6
					}
				}
			}
		}
		else = {
			if ={
				limit = {
					var:breeder_ratio < 0.65
				}
				add_modifier = {
					name = breeder_ratio_modifier_60
					months = 6
				}
			}	
			else_if ={
				limit = {
					var:breeder_ratio < 0.70
				}
				add_modifier = {
					name = breeder_ratio_modifier_65
					months = 6
				}
			}	
			else_if ={
				limit = {
					var:breeder_ratio < 0.75
				}
				add_modifier = {
					name = breeder_ratio_modifier_70
					months = 6
				}
			}	
			else ={
				add_modifier = {
					name = breeder_ratio_modifier_75
					months = 6
				}
			}
		}
	}
}
